<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="./index.js"></script>
</head>
<body>

<header>
    <div class="logo">
        <img src="../logo.png" alt="Logo">
    </div>
    <nav>
        <button onclick="window.location.href='../index.html'">Mapa</button>
        <button onclick="window.location.href='../lista/index.html'">Lista de Praias</button>
    </nav>
    <div class="auth-buttons">
        <!-- Exibe o nome do usuário e o botão de logout, dependendo do estado de autenticação -->
        <div id="user-info">
            <span id="user-name"></span>
            <button id="auth-button"></button>
        </div>
    </div>
</header>

<main>
    <div class="login-container">
        <h2>Login</h2>
        <form id="loginForm">
            <label for="email">E-mail</label>
            <input type="email" id="email" name="email" required>
            
            <label for="password">Senha</label>
            <input type="password" id="password" name="password" required>
            
            <button type="submit">Entrar</button>
        </form>
        <p>Não tem uma conta? <a href="/register/index.html">Cadastre-se</a></p>
    </div>
</main>

<footer>
    <p>Litoral Puro - 2024</p>
</footer>

<script>
    // Verifica se há um nome de usuário armazenado no localStorage
    const userName = localStorage.getItem("userName");
    
    const userNameElement = document.getElementById("user-name");
    const authButton = document.getElementById("auth-button");

    if (userName) {
        // Se o usuário estiver logado, mostra o nome e o botão de logout
        userNameElement.textContent = `Bem-vindo, ${userName}!`;
        authButton.textContent = "Logout";
        authButton.onclick = () => {
            // Remove o nome do usuário do localStorage
            localStorage.removeItem("userName");

            // Atualiza a interface para refletir que o usuário deslogou
            userNameElement.textContent = '';
            authButton.textContent = "Registrar/Login";

            // Não redireciona para nenhuma página após o logout
            alert("Você foi deslogado com sucesso.");
            window.location.href = "index.html";
        };
    } else {
        // Se o usuário não estiver logado, mostra o botão de login
        userNameElement.textContent = '';
        authButton.textContent = "Registrar/Login";
        authButton.onclick = () => {
            window.location.href = "/login/index.html"; // Redireciona para a tela de login
        };
    }
</script>    
</body>
</html>
